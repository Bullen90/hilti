# $Id$
#
# @TEST-EXEC:  hilti-build -m %INPUT ${PAC_DRIVER} -o a.out 
# @TEST-EXEC:  echo 1234567890 | ./a.out -p Mini::test >output 2>&1
# @TEST-EXEC:  echo 2234567890 | ./a.out -p Mini::test >>output 2>&1
# @TEST-EXEC:  echo 3234567890 | ./a.out -p Mini::test >>output 2>&1
# @TEST-EXEC:  echo 4234567890 | ./a.out -p Mini::test >>output 2>&1
# @TEST-EXEC:  test-diff output

module Mini;

export type test = unit {
       %export True;
       
       a: bytes &length=1;
       
       switch ( self.a ) {
           b"1" -> b: bytes &length=1
              { print "b1"; }
              
           b"2" -> b: bytes &length=2
              { print "b2"; }
              
           b"3" -> b: bytes &length=3
              { print "b3"; }
              
           *    -> b: bytes &length=4
              { print "def"; }
              
           }
           
       c: bytes &length=5 { 
           print "b", self.b;
           }
           
       on b {
           print "Hook!";
           }
};
